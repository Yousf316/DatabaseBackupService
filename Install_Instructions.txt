كيفية تثبيت خدمة النسخ الاحتياطي لقاعدة البيانات
مقدمة
تقوم خدمة النسخ الاحتياطي لقاعدة البيانات بأخذ نسخة احتياطية دورية من قاعدة بيانات SQL Server وحفظها في المجلد المحدد. في هذا الملف، سنتعرف على كيفية تثبيت هذه الخدمة على جهاز يعمل بنظام Windows.

المتطلبات الأساسية
يجب أن يكون لديك .NET Framework مثبت على جهازك.

يجب أن يكون لديك قاعدة بيانات SQL Server تعمل بشكل صحيح.

يجب أن تكون لديك صلاحيات مسؤول لتثبيت وتشغيل الخدمة.

خطوات التثبيت
إعداد المشروع:

تأكد من أنك قمت بتجميع المشروع في وضع Release في Visual Studio.

بعد التجميع، تأكد من أن جميع الملفات المطلوبة (مثل ملف BackupService.exe وملف التثبيت) موجودة في المجلد الخاص بالمشروع.

فتح موجه الأوامر (Command Prompt):

افتح موجه الأوامر (Command Prompt) بوضع المسؤول (Run as Administrator). يمكنك فعل ذلك من خلال البحث عن "cmd" في قائمة "ابدأ" ثم اختيار "تشغيل كمسؤول".

الانتقال إلى المجلد الخاص بالخدمة:

استخدم أمر cd للانتقال إلى المجلد الذي يحتوي على ملف الـ .exe الخاص بالخدمة:

bash
نسخ
تحرير
cd C:\path\to\your\BackupService
تثبيت الخدمة باستخدام InstallUtil:

استخدم الأداة InstallUtil.exe الخاصة بـ .NET Framework لتثبيت الخدمة. اكتب الأمر التالي في موجه الأوامر:

bash
نسخ
تحرير
C:\Windows\Microsoft.NET\Framework\v4.0.30319\InstallUtil.exe BackupService.exe
ملاحظة: تأكد من تعديل المسار إلى InstallUtil.exe ليعكس الإصدار المناسب من .NET الذي تستخدمه، وإذا كان لديك إصدار 64 بت من Windows، استخدم المسار:

bash
نسخ
تحرير
C:\Windows\Microsoft.NET\Framework64\v4.0.30319\InstallUtil.exe BackupService.exe
التأكد من تثبيت الخدمة:

بعد تنفيذ الأمر بنجاح، يمكنك التحقق من أن الخدمة تم تثبيتها بنجاح عبر فتح إدارة الخدمات (Services):

اضغط على Windows + R، ثم اكتب services.msc واضغط Enter.

ابحث عن خدمة Database Backup Service في قائمة الخدمات.

تشغيل الخدمة
بدء الخدمة:

يمكنك بدء الخدمة من خلال إدارة الخدمات (Services) أو عبر موجه الأوامر باستخدام الأمر التالي:

bash
نسخ
تحرير
net start DatabaseBackupService
إيقاف الخدمة:

لإيقاف الخدمة، استخدم الأمر التالي في موجه الأوامر:

bash
نسخ
تحرير
net stop DatabaseBackupService
إلغاء تثبيت الخدمة
إذا كنت بحاجة لإلغاء تثبيت الخدمة، يمكنك استخدام الأداة InstallUtil مع الخيار /u كالتالي:

افتح موجه الأوامر كمسؤول.

انتقل إلى المجلد الذي يحتوي على ملف BackupService.exe.

اكتب الأمر التالي لإلغاء تثبيت الخدمة:

bash
نسخ
تحرير
C:\Windows\Microsoft.NET\Framework\v4.0.30319\InstallUtil.exe /u BackupService.exe
أو إذا كنت تستخدم نظام 64 بت:

bash
نسخ
تحرير
C:\Windows\Microsoft.NET\Framework64\v4.0.30319\InstallUtil.exe /u BackupService.exe
ملاحظات مهمة
تأكد من إعداد الاتصال بقاعدة البيانات في ملف App.config باستخدام سلسلة الاتصال الصحيحة.

تأكد من وجود المجلدات التي يتم حفظ النسخ الاحتياطية بها. إذا لم توجد، سيتم إنشاؤها تلقائيًا أثناء عملية النسخ الاحتياطي.

إذا كنت في بيئة تطويرية، يمكنك اختبار الخدمة في وضع التفاعل مع المستخدم (Interactive Mode) باستخدام StartDebug()، لكن في بيئة الإنتاج، يجب تشغيل الخدمة على النحو المعتاد.

خاتمة
تم تثبيت الخدمة بنجاح! سيتم الآن تنفيذ النسخ الاحتياطي بشكل دوري بناءً على الإعدادات الموجودة في ملف App.config. إذا واجهت أي مشكلات، يمكنك الرجوع إلى سجلات الخدمة لتحديد الأخطاء المحتملة.